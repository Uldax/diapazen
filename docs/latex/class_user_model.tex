\section{User\-Model Class Reference}
\label{class_user_model}\index{User\-Model@{User\-Model}}
Inheritance diagram for User\-Model\-:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_user_model}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
{\bf \-\_\-\-\_\-construct} ()
\item 
{\bf connection\-To\-App} (\$email, \$password, \$login\-\_\-ip=null)
\item 
{\bf update\-Connection\-Data} (\$id, \$login\-\_\-ip=null)
\item 
{\bf data\-Provider} (\$id)
\item 
{\bf registration} (\$firstname, \$lastname, \$email, \$password)
\item 
{\bf change\-User} (\$id, \$first\-Name, \$last\-Name, \$email)
\item 
{\bf change\-Password} (\$email, \$password)
\item 
{\bf check\-Password} (\$id, \$password)
\item 
{\bf generator\-Psw} (\$size=8)
\item 
{\bf is\-Email\-Registred} (\$email)
\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Constructor \& Destructor Documentation}
\index{User\-Model@{User\-Model}!\-\_\-\-\_\-construct@{\-\_\-\-\_\-construct}}
\index{\-\_\-\-\_\-construct@{\-\_\-\-\_\-construct}!UserModel@{User\-Model}}
\subsubsection[{\-\_\-\-\_\-construct}]{\setlength{\rightskip}{0pt plus 5cm}\-\_\-\-\_\-construct (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{class_user_model_a095c5d389db211932136b53f25f39685}
Constructeur 

\subsection{Member Function Documentation}
\index{User\-Model@{User\-Model}!change\-Password@{change\-Password}}
\index{change\-Password@{change\-Password}!UserModel@{User\-Model}}
\subsubsection[{change\-Password}]{\setlength{\rightskip}{0pt plus 5cm}change\-Password (
\begin{DoxyParamCaption}
\item[{}]{\$email, }
\item[{}]{\$password}
\end{DoxyParamCaption}
)}\label{class_user_model_a9f4ee3e375718f0df726f3793d37e867}
Modification du mot de passe de l'utilisateur

On fait l’update du mot de passe à partir de l’email de l’utilisateur. On le hash avec Blow\-Fish (md5 et sha1 étant unsecure).


\begin{DoxyParams}[1]{Parameters}
type & {\em \$email} & email de l'utilisateur \\
\hline
type & {\em \$password} & mot de passe renseigné par l'utilisateur\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
boolean si la modification s'est bien passé 
\end{DoxyReturn}
\index{User\-Model@{User\-Model}!change\-User@{change\-User}}
\index{change\-User@{change\-User}!UserModel@{User\-Model}}
\subsubsection[{change\-User}]{\setlength{\rightskip}{0pt plus 5cm}change\-User (
\begin{DoxyParamCaption}
\item[{}]{\$id, }
\item[{}]{\$first\-Name, }
\item[{}]{\$last\-Name, }
\item[{}]{\$email}
\end{DoxyParamCaption}
)}\label{class_user_model_a5fb6b82c3f854bf04f1c34f6e05abcf2}
Modification du profil de l'utilisateur

On fait l’update des informations à partir de l’id de l’utilisateur. Puis si l’update s’est bien passé on retourne true.


\begin{DoxyParams}[1]{Parameters}
type & {\em \$id} & id de l'utilisateur \\
\hline
 & {\em firstname} & prénom renseigné par l'utilisateur \\
\hline
 & {\em lastname} & nom de famille renseigné par l'utilisateur \\
\hline
 & {\em email} & email renseigné par l'utilisateur\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
boolean true si la modification s'est bien passé 
\end{DoxyReturn}
\index{User\-Model@{User\-Model}!check\-Password@{check\-Password}}
\index{check\-Password@{check\-Password}!UserModel@{User\-Model}}
\subsubsection[{check\-Password}]{\setlength{\rightskip}{0pt plus 5cm}check\-Password (
\begin{DoxyParamCaption}
\item[{}]{\$id, }
\item[{}]{\$password}
\end{DoxyParamCaption}
)}\label{class_user_model_a123d0a14f688b884a7f75d918914eb52}
Vérification du mot de passe de l'utilisateur

On fait un Select pour récupérer le mot de passe de la base de donnée et on le test avec celui passé en paramètre.


\begin{DoxyParams}[1]{Parameters}
type & {\em \$id} & id de l'utilisateur \\
\hline
type & {\em \$password} & mot de passe renseigné par l'utilisateur\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
boolean si la vérification s'est bien passé 
\end{DoxyReturn}
\index{User\-Model@{User\-Model}!connection\-To\-App@{connection\-To\-App}}
\index{connection\-To\-App@{connection\-To\-App}!UserModel@{User\-Model}}
\subsubsection[{connection\-To\-App}]{\setlength{\rightskip}{0pt plus 5cm}connection\-To\-App (
\begin{DoxyParamCaption}
\item[{}]{\$email, }
\item[{}]{\$password, }
\item[{}]{\$login\-\_\-ip = {\ttfamily null}}
\end{DoxyParamCaption}
)}\label{class_user_model_a60058296e40a7521958d12f4e6004cae}
Connexion de l'utilisateur

On test tout d’abords si l’email et le password sont bien renseignés, puis avec une requête Select on récupère les infos en faisant un Where sur le password. Puis si on a un résultat et que le password passé en paramètre correspond à celui de la base de donnée, on met à jour la dernière connection grâce à update\-Connection\-Date et on renvoie un tableau avec toutes les données.


\begin{DoxyParams}{Parameters}
{\em email} & email renseigné par l'utilisateur \\
\hline
{\em password} & mot de passe renseigné par l'utilisateur \\
\hline
{\em login\-\_\-ip} & ip de l'utilisateur\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
array tableau avec toutes les infos si tout s’est bien passé et false sinon 
\end{DoxyReturn}
\index{User\-Model@{User\-Model}!data\-Provider@{data\-Provider}}
\index{data\-Provider@{data\-Provider}!UserModel@{User\-Model}}
\subsubsection[{data\-Provider}]{\setlength{\rightskip}{0pt plus 5cm}data\-Provider (
\begin{DoxyParamCaption}
\item[{}]{\$id}
\end{DoxyParamCaption}
)}\label{class_user_model_a905e84211fd8e818addac5810e08f045}
Récupération des données de l'utilisateur (sauf mot de passe)

On test d’abord si l’id renseigné est bon puis si c’est le cas avec une requête Select on récupère les infos en faisant un Where sur l’id. Si il y a un résultat on le renvoi sous forme de tableau.


\begin{DoxyParams}{Parameters}
{\em id} & id de l'utilisateur\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
array un tableau avec toutes les infos si tout s’est bien passé et false sinon 
\end{DoxyReturn}
\index{User\-Model@{User\-Model}!generator\-Psw@{generator\-Psw}}
\index{generator\-Psw@{generator\-Psw}!UserModel@{User\-Model}}
\subsubsection[{generator\-Psw}]{\setlength{\rightskip}{0pt plus 5cm}generator\-Psw (
\begin{DoxyParamCaption}
\item[{}]{\$size = {\ttfamily 8}}
\end{DoxyParamCaption}
)}\label{class_user_model_a1fd2f70ce94b6cef6338d56c7cca7424}
Fonction qui génère un mot de passe aléatoire

On choisit aléatoirement un élément dans une liste de caractère autant de fois que spécifié en paramètre.


\begin{DoxyParams}[1]{Parameters}
int & {\em \$size} & taille du mot de passe(8 par defaut)\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
retourne le mot de passe 
\end{DoxyReturn}
\index{User\-Model@{User\-Model}!is\-Email\-Registred@{is\-Email\-Registred}}
\index{is\-Email\-Registred@{is\-Email\-Registred}!UserModel@{User\-Model}}
\subsubsection[{is\-Email\-Registred}]{\setlength{\rightskip}{0pt plus 5cm}is\-Email\-Registred (
\begin{DoxyParamCaption}
\item[{}]{\$email}
\end{DoxyParamCaption}
)}\label{class_user_model_aa269ca9ad63f3b78bbdaafc35cc25d35}
Vérification si email contenu dans bdd

On fait un Select sur la table ‘dpz\-\_\-view\-\_\-users’ avec en clause Where le password passé en paramètre. Puis on test si il y a un résultat.


\begin{DoxyParams}[1]{Parameters}
type & {\em \$email} & email à vérifier \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
boolean true si l'email est présent 
\end{DoxyReturn}
\index{User\-Model@{User\-Model}!registration@{registration}}
\index{registration@{registration}!UserModel@{User\-Model}}
\subsubsection[{registration}]{\setlength{\rightskip}{0pt plus 5cm}registration (
\begin{DoxyParamCaption}
\item[{}]{\$firstname, }
\item[{}]{\$lastname, }
\item[{}]{\$email, }
\item[{}]{\$password}
\end{DoxyParamCaption}
)}\label{class_user_model_a7da627674fce6ba1b9e7fd3ad4726124}
Enregistrement d'un nouvel utilisateur

On test d’abords si les paramètres puis si ils sont bien renseignés. Ensuite on test si l’utilisateur n’est pas déjà enregistré on fait l’insertion des données dans la table dpz\-\_\-users. On hash le mot de passe avec Blow\-Fish (md5 et sha1 étant unsecure).


\begin{DoxyParams}{Parameters}
{\em firstname} & prénom renseigné par l'utilisateur \\
\hline
{\em lastname} & nom de famille renseigné par l'utilisateur \\
\hline
{\em email} & email renseigné par l'utilisateur \\
\hline
{\em password} & mot de passe renseigné par l'utilisateur\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool true si l'enregistrement s'est bien passé 
\end{DoxyReturn}
\index{User\-Model@{User\-Model}!update\-Connection\-Data@{update\-Connection\-Data}}
\index{update\-Connection\-Data@{update\-Connection\-Data}!UserModel@{User\-Model}}
\subsubsection[{update\-Connection\-Data}]{\setlength{\rightskip}{0pt plus 5cm}update\-Connection\-Data (
\begin{DoxyParamCaption}
\item[{}]{\$id, }
\item[{}]{\$login\-\_\-ip = {\ttfamily null}}
\end{DoxyParamCaption}
)}\label{class_user_model_a6df621beb2f7d7f0226657d8fa2d20a4}
Mise à jour des données de connexion de l'utilisateur (adresse ip et date de derniere connexion)

On test d’abord si l’id renseigné est bon , puis si c’est le cas on update d’abords la date de dernière connexion dans la table ‘dpz\-\_\-users’ avec une clause Where sur l’id. Puis on met à jour de la même manière l’ip.


\begin{DoxyParams}{Parameters}
{\em login\-\_\-ip} & ip de l'utilisateur\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
bool true si la mise à jour s'est bien passé 
\end{DoxyReturn}


The documentation for this class was generated from the following file\-:\begin{DoxyCompactItemize}
\item 
D\-:/\-Documents/\-Git\-Hub/diapazen/app/model/User\-Model.\-class.\-php\end{DoxyCompactItemize}
